( function( blocks, editor, element, components ) {

const el = wp.element.createElement;
const registerPlugin = wp.plugins.registerPlugin;
const PluginDocumentSettingPanel = wp.editPost.PluginDocumentSettingPanel;
const { withSelect, withDispatch, dispatch, select } = wp.data;
const { TextControl, SelectControl, ToggleControl, Panel, PanelBody, PanelRow, RangeControl, BaseControl, ButtonGroup, Button, IconButton, Toolbar, ToolbarButton, ToolbarGroup, ToolbarDropdownMenu } = components;
const { createHigherOrderComponent } = wp.compose;
const { InspectorControls, BlockControls } = editor;

/**
 * Add a merge tags button to select blocks.
 */
const svgIcon = el( 'svg', { width: 18, height: 18, viewBox: '0 0 47.04 29.504' },
	el( 'g',
		{
			transform: 'translate(-650.872 -175.591)',
		},
		el( 'path', {
			d: 'M-.128,20.92a4.721,4.721,0,0,0,.832-.1,3.2,3.2,0,0,0,.992-.368,2.818,2.818,0,0,0,.832-.72,1.809,1.809,0,0,0,.352-1.152V11.992a4.057,4.057,0,0,1,.448-1.952A4.71,4.71,0,0,1,4.416,8.664a4.4,4.4,0,0,1,1.344-.8,3.653,3.653,0,0,1,1.216-.256H9.888v2.88H8.128a1.886,1.886,0,0,0-.96.208,1.478,1.478,0,0,0-.544.544,1.931,1.931,0,0,0-.24.736,6.329,6.329,0,0,0-.048.752v6.24a3.064,3.064,0,0,1-.384,1.6,3.225,3.225,0,0,1-.912,1.008,4,4,0,0,1-1.088.544,4.51,4.51,0,0,1-.944.208v.064a6.966,6.966,0,0,1,.944.16,3.032,3.032,0,0,1,2,1.552,3.776,3.776,0,0,1,.384,1.84v6.048a6.329,6.329,0,0,0,.048.752,1.931,1.931,0,0,0,.24.736,1.478,1.478,0,0,0,.544.544,1.886,1.886,0,0,0,.96.208h1.76v2.88H6.976a3.653,3.653,0,0,1-1.216-.256,4.4,4.4,0,0,1-1.344-.8A4.71,4.71,0,0,1,3.328,34.68a4.057,4.057,0,0,1-.448-1.952V26.392a2.208,2.208,0,0,0-.352-1.28,2.692,2.692,0,0,0-.832-.8,3.286,3.286,0,0,0-.992-.4A4.076,4.076,0,0,0-.128,23.8Zm9.472,0a4.721,4.721,0,0,0,.832-.1,3.2,3.2,0,0,0,.992-.368,2.818,2.818,0,0,0,.832-.72,1.809,1.809,0,0,0,.352-1.152V11.992A4.057,4.057,0,0,1,12.8,10.04a4.71,4.71,0,0,1,1.088-1.376,4.4,4.4,0,0,1,1.344-.8,3.653,3.653,0,0,1,1.216-.256H19.36v2.88H17.6a1.886,1.886,0,0,0-.96.208,1.478,1.478,0,0,0-.544.544,1.931,1.931,0,0,0-.24.736,6.329,6.329,0,0,0-.048.752v6.24a3.064,3.064,0,0,1-.384,1.6,3.225,3.225,0,0,1-.912,1.008,4,4,0,0,1-1.088.544,4.51,4.51,0,0,1-.944.208v.064a6.966,6.966,0,0,1,.944.16,3.032,3.032,0,0,1,2,1.552,3.776,3.776,0,0,1,.384,1.84v6.048a6.329,6.329,0,0,0,.048.752,1.931,1.931,0,0,0,.24.736,1.478,1.478,0,0,0,.544.544,1.886,1.886,0,0,0,.96.208h1.76v2.88H16.448a3.653,3.653,0,0,1-1.216-.256,4.4,4.4,0,0,1-1.344-.8A4.71,4.71,0,0,1,12.8,34.68a4.057,4.057,0,0,1-.448-1.952V26.392A2.208,2.208,0,0,0,12,25.112a2.692,2.692,0,0,0-.832-.8,3.286,3.286,0,0,0-.992-.4,4.076,4.076,0,0,0-.832-.112Zm28.1,2.88a4.164,4.164,0,0,0-.864.112,3.848,3.848,0,0,0-.992.368,2.455,2.455,0,0,0-.816.7,1.869,1.869,0,0,0-.336,1.152v6.592a4.057,4.057,0,0,1-.448,1.952A4.71,4.71,0,0,1,32.9,36.056a4.4,4.4,0,0,1-1.344.8,3.653,3.653,0,0,1-1.216.256H27.424v-2.88h1.76a1.886,1.886,0,0,0,.96-.208,1.478,1.478,0,0,0,.544-.544,1.931,1.931,0,0,0,.24-.736,6.329,6.329,0,0,0,.048-.752v-6.24a3.064,3.064,0,0,1,.384-1.6,3.225,3.225,0,0,1,.912-1.008,3.659,3.659,0,0,1,1.088-.528,8.837,8.837,0,0,1,.944-.224v-.064a6.966,6.966,0,0,1-.944-.16,3.032,3.032,0,0,1-2-1.552,3.776,3.776,0,0,1-.384-1.84V12.728a6.329,6.329,0,0,0-.048-.752,1.931,1.931,0,0,0-.24-.736,1.478,1.478,0,0,0-.544-.544,1.886,1.886,0,0,0-.96-.208h-1.76V7.608h2.912a3.653,3.653,0,0,1,1.216.256,4.4,4.4,0,0,1,1.344.8,4.71,4.71,0,0,1,1.088,1.376,4.057,4.057,0,0,1,.448,1.952v6.336a2.286,2.286,0,0,0,.336,1.28,2.535,2.535,0,0,0,.816.8,3.286,3.286,0,0,0,.992.4,4.164,4.164,0,0,0,.864.112Zm9.472,0a4.164,4.164,0,0,0-.864.112,3.848,3.848,0,0,0-.992.368,2.455,2.455,0,0,0-.816.7,1.869,1.869,0,0,0-.336,1.152v6.592a4.057,4.057,0,0,1-.448,1.952,4.71,4.71,0,0,1-1.088,1.376,4.4,4.4,0,0,1-1.344.8,3.653,3.653,0,0,1-1.216.256H36.9v-2.88h1.76a1.886,1.886,0,0,0,.96-.208,1.478,1.478,0,0,0,.544-.544,1.931,1.931,0,0,0,.24-.736,6.329,6.329,0,0,0,.048-.752v-6.24a3.064,3.064,0,0,1,.384-1.6,3.225,3.225,0,0,1,.912-1.008,3.659,3.659,0,0,1,1.088-.528,8.837,8.837,0,0,1,.944-.224v-.064a6.966,6.966,0,0,1-.944-.16,3.032,3.032,0,0,1-2-1.552,3.776,3.776,0,0,1-.384-1.84V12.728a6.329,6.329,0,0,0-.048-.752,1.931,1.931,0,0,0-.24-.736,1.478,1.478,0,0,0-.544-.544,1.886,1.886,0,0,0-.96-.208H36.9V7.608h2.912a3.653,3.653,0,0,1,1.216.256,4.4,4.4,0,0,1,1.344.8,4.71,4.71,0,0,1,1.088,1.376,4.057,4.057,0,0,1,.448,1.952v6.336a2.286,2.286,0,0,0,.336,1.28,2.535,2.535,0,0,0,.816.8,3.286,3.286,0,0,0,.992.4,4.164,4.164,0,0,0,.864.112Z',
			transform: 'translate(651 167.983)',
		} )
	)
);

const withInspectorControls = createHigherOrderComponent( (BlockEdit) => {
	return (props) => {
		const { attributes } = props

		return el( wp.element.Fragment, {},
			el( BlockEdit, props),

			( props.name === 'core/paragraph' || props.name === 'core/heading' ) && (
				el( wp.blockEditor.BlockControls, null,
					el( ToolbarGroup, { className: 'ngl-toolbar' },
						el( ToolbarButton, {
							icon: svgIcon,
							label: 'Insert merge tags',
							className: 'ngl-toolbar-mergetags'
						} )
					),
				)
			)
		)
	}
}, 'withInspectorControl');

wp.hooks.addFilter( 'editor.BlockEdit', 'godreams/paragraph', withInspectorControls );

} ) (
	window.wp.blocks,
	window.wp.blockEditor,
	window.wp.element,
	window.wp.components
);