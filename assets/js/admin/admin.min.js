!function(e){"use strict";var n,a,t;function l(){var n=e(".ngl-popup-panel").find(".ngl-popup-settings").attr("data-block"),a=e(".ngl-popup-panel").find(".ngl-popup-demo").attr("data-block");e(".ngl-popup-overlay").removeClass("ngl-active"),e("body").removeClass("ngl-popup-hidden"),e(".ngl-popup-panel .ngl-popup-settings").appendTo(e(".ngl-block[data-block="+n+"]")),e(".ngl-popup-panel .ngl-popup-demo").appendTo(e(".ngl-block[data-block="+a+"]"))}function s(){e(".ngl-card-state.is-testing").removeClass("ngl-hidden"),e(".ngl-card-state.is-invalid").addClass("ngl-hidden")}function i(){e(".ngl-card-state.is-testing").addClass("ngl-hidden"),e(".ngl-card-state.is-invalid").removeClass("ngl-hidden")}function r(){var a,t;e(".ngl-card-state.is-testing").addClass("ngl-hidden"),e(".ngl-card-state.is-working").removeClass("ngl-hidden"),e(".ngl-card-view").length?setTimeout(function(){e(".ngl-card-state, .ngl-card-add2").addClass("ngl-hidden"),e(".ngl-card-view-"+n).length?e(".ngl-card-view-"+n).removeClass("ngl-hidden"):e(".ngl-card-view").removeClass("ngl-hidden")},2e3):(e(".ngl-boarding:visible").addClass("is-hidden"),e(".ngl-boarding[data-screen=3]").removeClass("is-hidden"),a=n,t="action=newsletterglue_ajax_get_onboarding_settings&security="+newsletterglue_params.ajaxnonce+"&api="+a,e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:t,success:function(n){n&&(e(".ngl-modal:visible").prepend(n),e(".ngl-modal:visible").attr("data-app",a),e(".ngl-boarding-next").removeClass("disabled").addClass("ready"))}}))}function o(){e(".ngl-modal-overlay").addClass("off")}function d(){var n=e(".ngl-metabox"),a=n.find("#ngl_app").val();if(0==n.length)return!1;if(e(".ngl-settings").length)return!1;var t=!0;if(n.find("input[type=text].is-required").each(function(){""==e(this).val()||"1"==e(this).attr("data-force-unready")?(t=!1,e(this).closest(".ngl-metabox-flex").addClass("is-error")):e(this).closest(".ngl-metabox-flex").removeClass("is-error")}),n.find(".dropdown.is-required").each(function(){""==e(this).dropdown("get value")?(t=!1,e(this).closest(".ngl-metabox-flex").addClass("is-error")):e(this).closest(".ngl-metabox-flex").removeClass("is-error")}),n.find("#ngl_send_newsletter").is(":checked")?(e("#ngl_send_newsletter2").prop("checked",!0),e("#ngl_double_confirm").val("yes")):(e("#ngl_send_newsletter2").prop("checked",!1),e("#ngl_double_confirm").val("no")),"campaignmonitor"===a){var l=e("#ngl_lists").parent().dropdown("get value"),s=e("#ngl_segments").parent().dropdown("get value");l&&0!=l.length||s&&0!=s.length?e("#ngl_lists, #ngl_segments").parents(".ngl-metabox-flex").removeClass("is-error"):(t=!1,e("#ngl_lists, #ngl_segments").parents(".ngl-metabox-flex").addClass("is-error"))}t?(e(".ngl-ready").removeClass("is-hidden"),e(".ngl-not-ready").addClass("is-hidden"),e(".ngl-not-ready").parents(".ngl-metabox-flex.alt3").removeClass("ngl-unready"),e(".ngl-newsletter-errors").remove(),e(".ngl-top-checkbox").removeClass("disable-send")):(e(".ngl-ready").addClass("is-hidden"),e(".ngl-not-ready").removeClass("is-hidden"),e(".ngl-not-ready").parents(".ngl-metabox-flex.alt3").addClass("ngl-unready"),0==e(".ngl-newsletter-errors").length&&e(".edit-post-header__settings").prepend('<span class="ngl-newsletter-errors">'+newsletterglue_params.publish_error+"</span>"),e(".ngl-top-checkbox").addClass("disable-send"),e("#ngl_double_confirm").val("no")),e("#ngl_send_newsletter").is(":checked")||(e(".ngl-newsletter-errors").remove(),e(".ngl-top-checkbox").removeClass("disable-send"))}function c(){if(0==e("#ngl_from_email").length)return!1;var n=e("#ngl_from_email"),a=n.val(),t=n.parent().parent().parent(),l=e("#ngl_app").val(),s="action=newsletterglue_ajax_verify_email&security="+newsletterglue_params.ajaxnonce+"&email="+a+"&app="+l;if(t.parents(".ngl-metabox-if-checked").hasClass("ngl-metabox-placeholder"))return!1;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){e("#ngl_from_email").hasClass("no-support-verify")||(t.find(".ngl-process").addClass("is-hidden"),t.find(".ngl-process.is-waiting").removeClass("is-hidden"),t.find(".ngl-label-more").empty())},success:function(a){t.find(".ngl-process").addClass("is-hidden"),a.success||!0===a?(a.success&&(e("#ngl_from_email").hasClass("no-support-verify")||(t.find(".ngl-process.is-valid").removeClass("is-hidden"),t.find(".ngl-process.is-valid .ngl-process-text").html(a.success),setTimeout(function(){t.find(".ngl-process").addClass("is-hidden")},1500))),n.parent().parent().parent().removeClass("is-error"),n.attr("data-force-unready","0")):(t.find(".ngl-process.is-invalid").removeClass("is-hidden"),t.find(".ngl-process.is-invalid .ngl-process-text").html(a.failed),a.failed_details&&t.find(".ngl-label-more").html(a.failed_details),n.parent().parent().parent().addClass("is-error"),n.attr("data-force-unready","1")),d()}})}e(".ngl .ui.dropdown, .ngl-metabox .ui.dropdown").dropdown({onChange:function(){d()}}),e(".ngl .ui.checkbox").checkbox();var g=null,u=null;wp.data&&wp.data.select("core/editor")&&wp.data.subscribe(function(){g=wp.data.select("core/editor").getEditorSettings().colors,u=wp.data.select("core/editor").getEditorSettings().fontSizes}),e(document).on("change",".ngl-modal[data-app=campaignmonitor] #ngl_lists",function(){var n=e(this).val(),a=!1;if(n&&n.length)a=!0;else{var t=e(".ngl-modal[data-app=campaignmonitor] #ngl_segments").parents(".ui").dropdown("get value");t&&0!=t.length||(a=!1)}a?(e(this).parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_segments").parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-boarding-next").removeClass("disabled").addClass("ready")):(e(this).parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_segments").parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-boarding-next").addClass("disabled").removeClass("ready"))}),e(document).on("change",".ngl-modal[data-app=campaignmonitor] #ngl_segments",function(){var n=e(this).val(),a=!1;if(n&&n.length)a=!0;else{var t=e(".ngl-modal[data-app=campaignmonitor] #ngl_lists").parents(".ui").dropdown("get value");t&&0!=t.length||(a=!1)}a?(e(this).parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_lists").parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-boarding-next").removeClass("disabled").addClass("ready")):(e(this).parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_lists").parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-boarding-next").addClass("disabled").removeClass("ready"))}),e(".ngl-date").flatpickr({enableTime:!0,dateFormat:"Y-m-d H:i:s",altInput:!0,enableSeconds:!0,altFormat:"H:i:s, Y/m/d",minDate:"today",onChange:function(){d()}}),e(document).on("click",".ngl-card-add",function(n){e(this).addClass("ngl-hidden"),e(".ngl-card-base").removeClass("ngl-hidden")}),e(".ngl-app").dropdown("setting","onChange",function(a){e(this).parents(".ngl-card-base").addClass("ngl-hidden"),e(".ngl-card-"+a).removeClass("ngl-hidden"),e(".ngl-card-add2.ngl-card-"+(n=a)).find(".ngl-card-link-start").show()}),e(document).on("click",".ngl-back",function(n){if(a)e(this).parent().parent().addClass("ngl-hidden");else{var t=e(this).attr("data-screen");e(".ngl-app").dropdown("clear"),e(this).parent().parent().addClass("ngl-hidden"),e("."+t).removeClass("ngl-hidden")}}),e(document).on("submit",".ngl-license-form",function(n){n.preventDefault();var a=e(this),l=a.serialize()+"&action=newsletterglue_check_license&security="+newsletterglue_params.ajaxnonce,o=!1;return a.find("input[type=text]:visible").each(function(){""==e(this).val()&&(e(this).addClass("error").focus(),o=!0)}),!o&&(t=e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){s()},success:function(e){setTimeout(function(){"invalid"===e.status&&(a.parents(".ngl-cards").find(".ngl-card-state.is-invalid .ngl-card-state-text").html(e.message),i()),"valid"===e.status&&r()},1e3)},error:function(){i()}}),!1)}),e(document).on("submit",".ngl-fields form",function(a){a.preventDefault();var l=e(this),o=e(this).parents(".ngl-card-add2").attr("data-app"),d=l.serialize()+"&action=newsletterglue_ajax_connect_api&security="+newsletterglue_params.ajaxnonce+"&app="+o;n=o;var c=!1;return e(".ngl-card-"+o).hasClass("ngl-hidden")||l.find("input[type=text]:visible").each(function(){""==e(this).val()&&(e(this).addClass("error").focus(),c=!0)}),!c&&(t=e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:d,beforeSend:function(){s()},success:function(e){setTimeout(function(){"invalid"===e.response&&i(),"successful"===e.response&&r()},1e3)}}),!1)}),e(document).on("click",".ngl-ajax-stop-test",function(n){return n.preventDefault(),e(this).parents(".ngl-card-state").addClass("ngl-hidden"),t.abort(),!1}),e(document).on("click",".ngl-ajax-test-connection",function(a){return a.preventDefault(),(n=e(this).parents(".ngl-card-view").attr("data-app"))?e(".ngl-card-add2.ngl-card-"+n+" .ngl-fields form").trigger("submit"):e(".ngl-card-add2 .ngl-license-form").trigger("submit"),!1}),e(document).on("click",".ngl-ajax-test-again",function(a){return a.preventDefault(),e(".ngl-card-add2 .ngl-fields form").length&&e('.ngl-card-add2[data-app="'+n+'"] .ngl-fields form').trigger("submit"),e(".ngl-card-add2 .ngl-license-form").length&&e(".ngl-card-add2 .ngl-license-form").trigger("submit"),!1}),e(document).on("click",".ngl-ajax-test-close",function(n){return n.preventDefault(),e(".ngl-card-state.is-invalid").addClass("ngl-hidden"),!1}),e(document).on("click",".ngl-ajax-edit-connection",function(t){return t.preventDefault(),e(".ngl-card-state.is-invalid").addClass("ngl-hidden"),e(this).parents(".ngl-card-view").is(":visible")&&(n=e(this).parents(".ngl-card-view").attr("data-app"),a=e(this).parents(".ngl-card-view-"+n)),n?(e(".ngl-card-add2.ngl-card-"+n).removeClass("ngl-hidden"),e(".ngl-card-add2.ngl-card-"+n).find(".ngl-card-link-start").show()):e(".ngl-card-add2.ngl-hidden").removeClass("ngl-hidden"),!1}),e(document).on("click",".ngl-ajax-remove-connection",function(a){return a.preventDefault(),n=e(this).parents(".ngl-card-view").attr("data-app"),e(".ngl-ajax-remove").attr("data-ngl_app",n),e(".ngl-card-state.confirm-remove").removeClass("ngl-hidden"),!1}),e(document).on("click",".ngl-ajax-remove",function(n){n.preventDefault(),e(".ngl-card-state.confirm-remove").addClass("ngl-hidden"),e(".ngl-card-state.is-removed").removeClass("ngl-hidden"),e(".ngl-app").dropdown("clear");var a=e(this).attr("data-ngl_app");if(a)var t="newsletterglue_ajax_remove_api";else t="newsletterglue_deactivate_license";if(a)var l="action="+t+"&security="+newsletterglue_params.ajaxnonce+"&app="+a;else l="action="+t+"&security="+newsletterglue_params.ajaxnonce;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,success:function(n){setTimeout(function(){e(".ngl-card-add").removeClass("ngl-hidden"),e(".ngl-card-state, .ngl-card-add2, .ngl-card-view").addClass("ngl-hidden"),e(".ngl-cards").hasClass("ngl-cards-free")&&(e(".ngl-card-add2.ngl-card-mailchimp").removeClass("ngl-hidden"),e(".ngl-cards input[type=text]").val("")),e(".ngl-card-license-form").length&&e(".ngl-card-license-form").removeClass("ngl-hidden"),e(".ngl-is-free").length&&e(".ngl-is-free").show()},2e3)}}),!1}),e(document).on("change","#ngl_send_newsletter",function(){0==e(".ngl-top-checkbox").length&&0==e(".ngl-no-connection").length&&0==e(".ngl-msgbox-wrap:visible").length&&0==e(".ngl-reset:visible").length&&e(".edit-post-header__settings").prepend('<div class="ngl-top-checkbox"><label><input type="checkbox" name="ngl_send_newsletter2" id="ngl_send_newsletter2" value="1">'+newsletterglue_params.send_newsletter+"</label></div>"),d(),e(this).is(":checked")?e(".ngl-top-checkbox").removeClass("is-hidden"):e("#ngl_send_newsletter2").prop("checked",!1)}),e(document).on("change","#ngl_send_newsletter2",function(){e(this).is(":checked")?e("#ngl_send_newsletter").prop("checked",!0).trigger("change"):e("#ngl_send_newsletter").prop("checked",!1).trigger("change")}),e(document).on("change","#newsletter_glue_metabox #ngl_from_email",function(){c()}),e(document).on("change",".ngl-metabox input[type=text]",function(){d()}),e(document).on("blur",".editor-post-title__input",function(){e(this).val()&&0==e(".ngl-no-connection").length&&""==e("#ngl_subject").val()&&e("#ngl_subject").val(e(this).val()).trigger("change")}),e(document).on("click",".ngl-review-link",function(n){e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_clicked_review_button&security="+newsletterglue_params.ajaxnonce})}),e(document).on("click",".ngl-reset-newsletter",function(n){n.preventDefault();var a=e(this),t=e(this).attr("data-post-id"),l="action=newsletterglue_ajax_reset_newsletter&security="+newsletterglue_params.ajaxnonce+"&post_id="+t;return e("#ngl_double_confirm").val("no"),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){a.addClass("loading")},success:function(n){a.removeClass("loading"),e(".ngl-reset, .ngl-msgbox-wrap").addClass("is-hidden"),e(".ngl-send, .ngl-sending-box").removeClass("is-hidden")}}),!1}),e(document).on("click",".ngl-test-email",function(n){n.preventDefault();var a=e(this),t=e(this).attr("data-post_id"),l=a.parents(".ngl-metabox"),s="action=newsletterglue_ajax_test_email&security="+newsletterglue_params.ajaxnonce+"&post_id="+t;return l.find("input[type=text], select, input[type=hidden], textarea").each(function(){s=s+"&"+e(this).attr("id")+"="+encodeURIComponent(e(this).val())}),l.find("input[type=checkbox]").each(function(){e(this).is(":checked")&&(s=s+"&"+e(this).attr("id")+"=1")}),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){e(".ngl-is-default").hide(),e(".ngl-is-sending").show(),e(".ngl-test-result").hide()},success:function(n){e(".ngl-is-sending").hide(),e(".ngl-action-link").show(),n&&n.success?(e(".ngl-is-valid").show(),e(".ngl-test-result.ngl-is-valid").show().html(n.success)):(e(".ngl-is-invalid").show(),n&&n.fail?e(".ngl-test-result.ngl-is-invalid").show().html(n.fail):e(".ngl-test-result.ngl-is-invalid").show().html(newsletterglue_params.unknown_error))}}),!1}),e(document).on("click",".ngl-retest",function(n){return n.preventDefault(),e(".ngl-action-link, .ngl-action button, .ngl-is-valid, .ngl-is-invalid").hide(),e(".ngl-is-default").show(),!1}),e(document).on("click",".ngl-newsletter-errors a",function(n){return n.preventDefault(),e(".ngl-metabox .is-error").find("input:first").focus(),!1}),e(document).on("click",'a[href="#ngl-status-log"]',function(n){n.preventDefault();var a=e(this);e(this).attr("data-post-id");return function(n){var a=e(".ngl-modal-overlay");a.removeClass("off"),e(".ngl-modal-loader");var t=n.attr("data-post-id"),l="action=newsletterglue_ajax_get_log&security="+newsletterglue_params.ajaxnonce+"&post_id="+t;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){a.html('<div class="ngl-modal ngl-modal-loader"><div class="ngl-loading"></div></div>')},success:function(e){a.find(".ngl-modal-loader").replaceWith(e)}})}(a),!1}),e(document).on("click",".ngl-modal-close",function(e){return e.preventDefault(),o(),!1}),e(document).on("click",".ngl-modal-overlay:not(.onboarding)",function(e){return e.preventDefault(),o(),!1}),e(document).on("click",".ngl-modal",function(e){e.stopPropagation()}),e(document).on("click",".editor-post-publish-button",function(n){e("#ngl_send_newsletter2").is(":checked")?(e("#ngl_double_confirm").val("yes"),e("#ngl_send_newsletter, #ngl_send_newsletter2").prop("checked",!1),e(".ngl-msgbox-wrap").removeClass("is-hidden"),e(".ngl-reset").addClass("is-hidden"),e(".ngl-top-checkbox").addClass("is-hidden"),e(".ngl-send, .ngl-sending-box").addClass("is-hidden"),e(".block-editor-writing-flow").length&&(e(".ngl-msgbox-wrap").find("div").css({opacity:0,"pointer-events":"none"}),e(".ngl-msgbox-wrap").html(newsletterglue_params.loader),setTimeout(function(){var n=e("#post_ID").val(),a="action=newsletterglue_ajax_get_newsletter_state&security="+newsletterglue_params.ajaxnonce+"&post_id="+n;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:a,success:function(n){n&&e(".ngl-msgbox-wrap").empty().html(n)}})},3e3))):"yes"==e("#ngl_double_confirm").val()&&e("#ngl_double_confirm").val("no")}),e(document).delegate(".ngl-textarea","keydown",function(n){if(9==(n.keyCode||n.which)){n.preventDefault();var a=this.selectionStart,t=this.selectionEnd;e(this).val(e(this).val().substring(0,a)+"\t"+e(this).val().substring(t)),this.selectionStart=this.selectionEnd=a+1}}),e(document).on("click",".ngl-settings-save:not(.saved)",function(n){return n.preventDefault(),e(".ngl-settings input[type=text], .ngl-settings textarea, .ngl-settings input[type=checkbox], .ngl-settings select").trigger("change"),!1}),e(document).on("change",".ngl-settings input[type=text], .ngl-settings textarea, .ngl-settings input[type=checkbox], .ngl-settings select, .ngl-boarding .ngl-metabox-segment select",function(){if(!e("body").find(".ngl-theme").length){var n=e(this).closest(".ngl-metabox-flex"),a=e(".ngl-settings-save"),t=e(this).attr("id"),l=e(this).val();e(this).is(":checkbox")&&(l=e(this).is(":checked")?1:0);var s=e(this).is("textarea");l=encodeURIComponent(l);var i="action=newsletterglue_ajax_save_field&security="+newsletterglue_params.ajaxnonce+"&id="+t+"&value="+l;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:i,beforeSend:function(){n.find(".ngl-label-verification .ngl-process").addClass("is-hidden"),n.find(".ngl-label-verification .ngl-process.is-waiting").removeClass("is-hidden"),s||n.find(".ngl-label-more").empty(),a.html(newsletterglue_params.saving),"ngl_from_email"==t&&e(".ngl-boarding").length&&e(".ngl-boarding-next").addClass("disabled")},success:function(l){a.addClass("saved").html(newsletterglue_params.saved),setTimeout(function(){a.removeClass("saved").html(newsletterglue_params.save)},2e3),n.find(".ngl-label-verification .ngl-process").addClass("is-hidden"),l.failed?(n.find(".ngl-label-verification .ngl-process.is-invalid").removeClass("is-hidden"),n.find(".ngl-label-verification .ngl-process.is-invalid .ngl-process-text").html(l.failed),n.addClass("is-error"),l.failed_details&&!s&&n.find(".ngl-label-more").html(l.failed_details)):l.success?(n.find(".ngl-label-verification .ngl-process.is-valid").removeClass("is-hidden"),"ngl_from_email"==t&&e("#ngl_from_email").hasClass("no-support-verify")||n.find(".ngl-label-verification .ngl-process.is-valid .ngl-process-text").html(l.success),n.removeClass("is-error")):(n.removeClass("is-error"),n.find(".ngl-label-verification .ngl-process.is-valid").removeClass("is-hidden"),setTimeout(function(){n.find(".ngl-label-verification .ngl-process").addClass("is-hidden")},1500)),n.hasClass("is-error")||("ngl_from_email"==t&&e(".ngl-boarding").length&&setTimeout(function(){e(".ngl-boarding-next").removeClass("disabled").addClass("ready")},1500),setTimeout(function(){n.find(".ngl-label-verification .ngl-process").addClass("is-hidden")},1500));var i=e(".ngl-modal[data-app=campaignmonitor]:visible");if(i.length){var r=i.find("#ngl_lists").parents(".ui").dropdown("get value"),o=i.find("#ngl_segments").parents(".ui").dropdown("get value");r&&0!=r.length||o&&0!=o.length?(i.find("#ngl_lists").parents(".ngl-metabox-flex").removeClass("is-error"),i.find("#ngl_segments").parents(".ngl-metabox-flex").removeClass("is-error")):(i.find("#ngl_lists").parents(".ngl-metabox-flex").addClass("is-error"),i.find("#ngl_segments").parents(".ngl-metabox-flex").addClass("is-error"))}}})}}),e(document).on("click",".ngl-customize-toggle",function(n){return n.preventDefault(),e(this).find("i").hasClass("down")?(e(this).find("i").removeClass("down").addClass("up"),e(".ngl-customize-preview").show()):(e(this).find("i").removeClass("up").addClass("down"),e(".ngl-customize-preview").hide()),!1}),e(document).on("click",".ngl-block-useall",function(n){return n.preventDefault(),e(".ngl-block").each(function(){e(this).removeClass("ngl-block-unused").addClass("ngl-block-used"),e(this).find("input[type=checkbox]").prop("checked",!0)}),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_ajax_use_all_blocks&security="+newsletterglue_params.ajaxnonce}),!1}),e(document).on("click",".ngl-block-disableall",function(n){return n.preventDefault(),e(".ngl-block").each(function(){e(this).removeClass("ngl-block-used").addClass("ngl-block-unused"),e(this).find("input[type=checkbox]").prop("checked",!1)}),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_ajax_disable_all_blocks&security="+newsletterglue_params.ajaxnonce}),!1}),e(document).on("change",".ngl-block-use input[type=checkbox]",function(n){var a=e(this).attr("id");if(e(this).is(":checked")){var t="yes";e(this).parents(".ngl-block").removeClass("ngl-block-unused").addClass("ngl-block-used")}else{t="no";e(this).parents(".ngl-block").removeClass("ngl-block-used").addClass("ngl-block-unused")}e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_ajax_use_block&security="+newsletterglue_params.ajaxnonce+"&id="+a+"&value="+t})}),e(document).on("click",".ngl-textarea-reset",function(n){n.preventDefault();var a=e("#"+e(this).attr("data-selector"));return a.val(a.attr("data-default")),a.trigger("change"),!1}),e(document).on("click",".ngl-textarea-append",function(n){n.preventDefault();var a=e("#"+e(this).attr("data-selector")),t=e(this).attr("data-value");return a.val(a.val()+" "+t),a.trigger("change"),!1}),e(document).on("click",".ngl-block-demo",function(n){n.preventDefault();var a=e(this).parents(".ngl-block").attr("data-block");return e(".ngl-popup-overlay").addClass("ngl-active"),e("body").addClass("ngl-popup-hidden"),e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel").empty(),e(".ngl-popup-demo[data-block="+a+"]").appendTo(e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel")),e(".ngl-popup-overlay.ngl-active").addClass("ngl-popup-overlay-demo"),e(".ngl-popup-overlay.ngl-active").removeClass("ngl-popup-overlay-settings"),!1}),e(document).on("click",".ngl-block-defaults a",function(n){n.preventDefault();var a=e(this).parents(".ngl-block").attr("data-block");return e(".ngl-popup-overlay").addClass("ngl-active"),e("body").addClass("ngl-popup-hidden"),e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel").empty(),e(".ngl-popup-settings[data-block="+a+"]").appendTo(e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel")),e(".ngl-popup-overlay.ngl-active").removeClass("ngl-popup-overlay-demo"),e(".ngl-popup-overlay.ngl-active").addClass("ngl-popup-overlay-settings"),!1}),e(document).on("click",".ngl-popup-panel",function(e){e.stopPropagation()}),e(document).on("click",function(){l()}),e(document).on("click",".ngl-popup-close",function(e){e.preventDefault(),l()}),e(document).on("click",".ngl-edit-more a",function(n){n.preventDefault();var a=e(".ngl-edit-more-box");return a.hasClass("is-hidden")?(a.removeClass("is-hidden"),e(this).find("i").removeClass("down").addClass("up")):(a.addClass("is-hidden"),e(this).find("i").addClass("down").removeClass("up")),!1}),e(document).on("change",".ngl-popup-settings input[type=checkbox]",function(n){var a=e(this).parents(".ngl-popup-settings").attr("data-block"),t=e(this).parents("form").serialize()+"&action=newsletterglue_ajax_save_block&security="+newsletterglue_params.ajaxnonce+"&id="+a;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:t,success:function(e){}})}),e(document).on("click",".ngl-license-wrap-flex a.ngl-license-wrap-action",function(n){n.preventDefault();var a=e(this).parents(".ngl-license-wrap"),t=a.find(".ngl-license-wrap-flex a.ngl-license-wrap-action"),l=a.find("#newsletterglue_pro_license"),s=l.val();if(s){var i="action=newsletterglue_check_license&newsletterglue_pro_license="+s+"&security="+newsletterglue_params.ajaxnonce;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:i,beforeSend:function(){t.addClass("is-hidden"),a.find("a.ngl-verifying-state").removeClass("is-hidden"),l.prop("disabled",!0)},success:function(n){l.prop("disabled",!1),"invalid"===n.status?(t.addClass("is-hidden"),a.find("a.ngl-invalid-state").removeClass("is-hidden"),a.find(".ngl-license-try-again").removeClass("is-hidden")):e(".ngl-boarding-change").length>0&&e(".ngl-boarding").is(":visible")?(a.parents(".ngl-boarding").find(".ngl-boarding-change").trigger("click"),t.addClass("is-hidden"),a.find("a.ngl-base-state").removeClass("is-hidden")):(a.find(".ngl-license-wrap-success").removeClass("is-hidden"),a.find(".ngl-license-wrap-close").removeClass("is-hidden"),e(".ngl-license-review").remove())}}),!1}l.focus()}),e(document).on("click",".ngl-reset-newsletter-pre",function(n){return n.preventDefault(),e(".ngl-unschedule-confirm").hasClass("is-hidden")&&e(".ngl-unschedule-confirm").removeClass("is-hidden"),!1}),e(document).on("click",".ngl-unschedule-undo",function(n){return n.preventDefault(),e(".ngl-unschedule-confirm").hasClass("is-hidden")||e(".ngl-unschedule-confirm").addClass("is-hidden"),!1}),e(document).on("click",".ngl-license-try-again",function(n){n.preventDefault();var a=e(this).parents(".ngl-license-wrap");return e(this).addClass("is-hidden"),a.find(".ngl-license-wrap-action").addClass("is-hidden"),a.find("a.ngl-base-state").removeClass("is-hidden"),a.find("input[type=text]").val("").focus(),!1}),e(document).on("click",".ngl-license-wrap-close",function(n){return n.preventDefault(),e(this).parents(".ngl-license-wrap").remove(),e(".ngl-license-review").remove(),!1}),e(document).on("change",".ngl-settings-mailchimp #ngl_audience, .ngl-mb-mailchimp #ngl_audience",function(e){}),e(document).on("click",".ngl-tabbed-check .ui.button",function(n){n.preventDefault();var a=e(this).attr("data-value");return e(this).parents(".ngl-tabbed-check").find("input.ngl-value-hidden").val(a).trigger("change"),e(this).parents(".buttons").find(".button").removeClass("active"),e(this).addClass("active"),!1}),e(window).on("load",function(){e("#ngl_send_newsletter").length&&0==e(".ngl-no-connection").length&&0==e(".ngl-msgbox-wrap:visible").length&&0==e(".ngl-reset:visible").length&&e(".edit-post-header__settings").prepend('<div class="ngl-top-checkbox"><label><input type="checkbox" name="ngl_send_newsletter2" id="ngl_send_newsletter2" value="1">'+newsletterglue_params.send_newsletter+"</label></div>"),c(),setTimeout(function(){if(g||u){var n="action=newsletterglue_save_default_colors&colors="+(g?JSON.stringify(g):"")+"&sizes="+(u?JSON.stringify(u):"")+"&security="+newsletterglue_params.ajaxnonce;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:n,success:function(e){}})}},1e3)}),e(window).bind("keydown",function(n){if(n.ctrlKey||n.metaKey)switch(String.fromCharCode(n.which).toLowerCase()){case"s":n.preventDefault(),e("#ngl_double_confirm").val("no")}})}(jQuery);