!function(e){"use strict";function n(n,l){var i={action:"newsletterglue_ajax_save_image",elem_id:n,id:l,security:newsletterglue_params.ajaxnonce};console.log(i),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:i,beforeSend:function(){},success:function(l){console.log(l),!0===l.success?(e("#"+n).parents(".ngl-theme-upload").find(".ngl-theme-upload-name").html(l.data.html),e("#"+n).val(l.data.url),e("#"+n+"_id").val(l.data.id),e(".ngl-email-logo").removeClass("is-hidden").find("img").attr("src",l.data.url)):(e("#"+n).parents(".ngl-theme-upload").find(".ngl-theme-upload-name").html(newsletterglue_params.no_image_set),e("#"+n).val(""),e("#"+n+"_id").val(""))}})}function l(n){if(n.parents(".ngl-settings-accent").length)return!1;var l=n.parents(".components-base-control"),i=n.attr("data-option"),t=n.val(),s=n;if(e(".ngl-email.ngl-mobile").is(":visible"))var o=e(".ngl-email.ngl-mobile");else o=e(".ngl-email.ngl-desktop");n.hasClass("dropdown")&&(i=n.parents(".components-base-control").attr("data-option"),t=n.dropdown("get value")),n.is(":checkbox")&&(t=n.is(":checked")?1:0);var a="action=newsletterglue_ajax_save_theme_setting&security="+newsletterglue_params.ajaxnonce+"&id="+i+"&value="+t;if("font"==i)if(t&&"0"!=t){var d=n.parents(".components-base-control").find(".ui .text").html();o.css({"font-family":d})}else o.css({"font-family":"inherit"});if("h1_align"==i||"h2_align"==i||"h3_align"==i||"h4_align"==i||"h5_align"==i||"h6_align"==i||"p_align"==i){var r=i.replace("_align","");e(".ngl-email").find(r).css({"text-align":t})}if("h1_size"==i||"h2_size"==i||"h3_size"==i||"h4_size"==i||"h5_size"==i||"h6_size"==i||"p_size"==i){r=i.replace("_size","");o.find(r).not(".ngl-mobile").css({"font-size":t+"px"})}if("mobile_h1_size"==i||"mobile_h2_size"==i||"mobile_h3_size"==i||"mobile_h4_size"==i||"mobile_h5_size"==i||"mobile_h6_size"==i||"mobile_p_size"==i){r=i.replace("_size","").replace("mobile_","");o.find(r).not(".ngl-desktop").css({"font-size":t+"px"})}if("h1_colour"==i||"h2_colour"==i||"h3_colour"==i||"h4_colour"==i||"h5_colour"==i||"h6_colour"==i||"p_colour"==i||"a_colour"==i){r=i.replace("_colour","");o.find(r).not(".wp-block-button__link").css({color:t})}if("email_bg"==i&&e(".ngl-email").css({"background-color":t}),"container_bg"==i&&(o.find(".ngl-email-container").css({"background-color":t}),e(".ngl-email-container").css({"background-color":t})),"btn_bg"==i&&o.find(".wp-block-button__link").css({"background-color":t}),"btn_colour"==i&&o.find(".wp-block-button__link").css({color:t}),"btn_border"==i&&o.find(".wp-block-button__link").css({"border-color":t}),"btn_radius"==i&&o.find(".wp-block-button__link").css({"border-radius":t+"px"}),"btn_width"==i||"mobile_btn_width"==i){var g=t+"px";0==t&&(g="auto"),o.find(".wp-block-button__link").css({"min-width":g})}"container_padding1"!=i&&"mobile_container_padding1"!=i||o.find(".ngl-email-container").css({"padding-top":t+"px"}),"container_padding2"!=i&&"mobile_container_padding2"!=i||o.find(".ngl-email-container").css({"padding-bottom":t+"px"}),"container_margin1"!=i&&"mobile_container_margin1"!=i||o.find(".ngl-email-container").css({"margin-top":t+"px"}),"container_margin2"!=i&&"mobile_container_margin2"!=i||o.find(".ngl-email-container").css({"margin-bottom":t+"px"}),"ngl_credits"==i&&(1==t?e(".ngl-email").find(".ngl-credits").removeClass("is-hidden"):e(".ngl-email").find(".ngl-credits").addClass("is-hidden")),"ngl_add_logo"==i&&(1==t?e(".ngl-email").find(".ngl-email-logo").removeClass("is-hidden"):e(".ngl-email").find(".ngl-email-logo").addClass("is-hidden")),"ngl_add_title"==i&&(1==t?e(".ngl-email").find("h1:first").removeClass("is-hidden"):e(".ngl-email").find("h1:first").addClass("is-hidden")),"ngl_add_featured"==i&&(1==t?e(".ngl-email").find(".ngl-masthead").removeClass("is-hidden"):e(".ngl-email").find(".ngl-masthead").addClass("is-hidden")),"ngl_position_featured"==i&&("above"==t?e(".ngl-email").each(function(){var n=e(this).find(".ngl-masthead-below");n.insertBefore(e(this).find("h1.ngl-primary-h")),n.removeClass("ngl-masthead-below").addClass("ngl-masthead-above")}):e(".ngl-email").each(function(){var n=e(this).find(".ngl-masthead-above");n.insertAfter(e(this).find("h1.ngl-primary-h")),n.removeClass("ngl-masthead-above").addClass("ngl-masthead-below")})),"ngl_position_logo"==i&&e(".ngl-email-logo").removeClass("ngl-logo-left ngl-logo-center ngl-logo-right ngl-logo-full").addClass("ngl-logo-"+t),console.log("save_theme"),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:a,beforeSend:function(){l.find(".ngl-process").addClass("is-hidden"),l.find(".ngl-process.is-waiting").removeClass("is-hidden"),s.attr("disabled","disabled")},success:function(e){l.find(".ngl-process").addClass("is-hidden"),l.find(".ngl-process.is-valid").removeClass("is-hidden"),s.removeAttr("disabled"),setTimeout(function(){l.find(".ngl-process").addClass("is-hidden")},1500)}})}function i(){e(".ngl-color-field").each(function(){var n=e(this);n.spectrum({type:"color",showPalette:!1,showInput:!0,showButtons:!1,showAlpha:!1,allowEmpty:!0,clickoutFiresChange:!0,move:function(i){if(i)var t=i.toHexString();else t="";var s=n.parents(".ngl-theme-color").find("input.ngl-theme-input").attr("data-option");l(e("input[data-option="+s+"]")),e(".ngl-customize-preview").length&&(e(".ngl-customize-preview").find("blockquote").css({"border-color":t}),e(".ngl-customize-preview").find("p a").css({color:t}),e(".ngl-customize-preview").find("p.ngl-customize-button a").css({"background-color":t}))}})})}e(document).on("click",".ngl-theme-upload-button a, .ngl-image-trigger",function(l){var i,t,s;return l.preventDefault(),i=e(this).parents(".ngl-theme-upload"),s=i.attr("data-id"),t&&t.open(),(t=wp.media({title:newsletterglue_params.select_image,multiple:!1,library:{type:"image"}})).on("close",function(){var l=t.state().get("selection"),i=new Array,o=0;l.each(function(e){i[o]=e.id,o++});var a=i.join(",");e("input#"+s+"_id").val(a),n(s,a)}),t.on("open",function(){var n=t.state().get("selection");e("input#"+s+"_id").val().split(",").forEach(function(e){if(e){var l=wp.media.attachment(e);l.fetch(),n.add(l?[l]:[])}})}),t.open(),!1}),e(document).on("click",".ngl-image-remove",function(l){l.preventDefault();var i=e(this).parents(".ngl-theme-upload").attr("data-id");return n(i,0),"newsletterglue_logo"==i&&e(".ngl-email-logo").addClass("is-hidden"),!1}),e(document).on("ngl-theme-options",function(){e("#ngl_credits").is(":checked")?e(".ngl-email").find(".ngl-credits").removeClass("is-hidden"):e(".ngl-email").find(".ngl-credits").addClass("is-hidden"),e("#ngl_add_featured").is(":checked")?e(".ngl-email").find(".ngl-masthead").removeClass("is-hidden"):e(".ngl-email").find(".ngl-masthead").addClass("is-hidden")}).trigger("ngl-theme-options"),e(document).on("keyup",'.ngl-theme-px input[type="number"]',function(){var n=parseInt(e(this).val()),l=parseInt(e(this).attr("min")),i=parseInt(e(this).attr("max"));n<l&&e(this).val(l),n>i&&e(this).val(i)}),e(document).on("change",".ngl-theme-input",function(){l(e(this))}),e(document).on("click",".ngl-email a",function(e){return e.preventDefault(),!1}),i(),e(document).on("click",".ngl-theme-more",function(n){n.preventDefault(),e(this).hide(),e(".ngl-theme-hidden").show()}),e(document).on("click",".ngl-theme-less",function(n){n.preventDefault(),e(".ngl-theme-more").show(),e(".ngl-theme-hidden").hide()}),e(document).on("click",".ngl-theme-reset-link",function(){event.preventDefault();var n=e(this).parents(".ngl-theme-reset");return n.find(".ngl-theme-reset-confirm").hasClass("is-hidden")?n.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").removeClass("is-hidden"):n.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),!1}),e(document).on("click",".ngl-theme-reset-back",function(n){return n.preventDefault(),e(this).parents(".ngl-theme-reset").find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),!1}),e(document).on("click",".ngl-theme-reset-do",function(n){n.preventDefault();var l=e(this).parents(".ngl-theme-reset"),t="action=newsletterglue_ajax_reset_theme&security="+newsletterglue_params.ajaxnonce,s=!1;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:t,beforeSend:function(){e(".ngl-theme").addClass("ngl-load"),l.find(".ngl-process").addClass("is-hidden"),l.find(".ngl-process.is-waiting").removeClass("is-hidden"),l.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),e(".ngl-theme").hasClass("ngl-mobile")&&(s=!0)},success:function(n){if(0==e(".ngl-theme").length){l.find(".ngl-process.is-waiting").addClass("is-hidden"),l.find(".ngl-process.is-valid").removeClass("is-hidden"),l.parents(".ngl-metabox-flex").find(".ngl-color-field").spectrum("set","#0088A0"),e(".ngl-customize-preview").length&&(e(".ngl-customize-preview").find("blockquote").css({"border-color":"#0088A0"}),e(".ngl-customize-preview").find("p a").css({color:"#0088A0"}),e(".ngl-customize-preview").find("p.ngl-customize-button a").css({"background-color":"#0088A0"})),setTimeout(function(){l.find(".ngl-process").addClass("is-hidden")},1500)}else e(".ngl-theme").replaceWith(n),e(".ngl-theme").find(".ui.dropdown, .ui.dropdown").dropdown(),e(".ngl-theme").find(".ngl-theme-reset .ngl-process").addClass("is-hidden"),e(".ngl-theme").find(".ngl-theme-reset .ngl-process.is-valid").removeClass("is-hidden"),s?(e(".ngl-theme").addClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").hide()):(e(".ngl-theme").removeClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").show()),i(),setTimeout(function(){e(".ngl-theme").find(".ngl-process").addClass("is-hidden")},1500)}}),!1}),e(document).on("click",".ngl-theme-toggle span.ngl-mobile",function(){e(".ngl-theme-toggle").find("span.ngl-bulb").css({left:"80px"}).html(e(this).html()),e(".ngl-theme").addClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").hide()}),e(document).on("click",".ngl-theme-toggle span.ngl-desktop",function(){e(".ngl-theme-toggle").find("span.ngl-bulb").css({left:"0"}).html(e(this).html()),e(".ngl-theme").removeClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").show()}),e(document).find("#ngl_add_title").length&&(e(document).find("#ngl_add_title").is(":checked")||(e(document).find("#ngl_link_title").prop("disabled",!0),e(document).find("#ngl_link_title").parents(".components-base-control__field").addClass("disabled"))),e(document).on("change","#ngl_add_title",function(){e(this).is(":checked")?(e(document).find("#ngl_link_title").prop("disabled",!1),e(document).find("#ngl_link_title").parents(".components-base-control__field").removeClass("disabled")):(e(document).find("#ngl_link_title").prop("disabled",!0),e(document).find("#ngl_link_title").parents(".components-base-control__field").addClass("disabled"))})}(jQuery);