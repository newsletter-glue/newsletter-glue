!function(e){"use strict";function n(n,t){var l={action:"newsletterglue_ajax_save_image",elem_id:n,id:t,security:newsletterglue_params.ajaxnonce};console.log(l),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){},success:function(t){console.log(t),!0===t.success?(e("#"+n).parents(".ngl-theme-upload").find(".ngl-theme-upload-name").html(t.data.html),e("#"+n).val(t.data.url),e("#"+n+"_id").val(t.data.id),e(".ngl-email-logo").removeClass("is-hidden").find("img").attr("src",t.data.url)):(e("#"+n).parents(".ngl-theme-upload").find(".ngl-theme-upload-name").html(newsletterglue_params.no_image_set),e("#"+n).val(""),e("#"+n+"_id").val(""))}})}function t(n){if(n.parents(".ngl-settings-accent"))return!1;var t=n.parents(".components-base-control"),l=n.attr("data-option"),i=n.val(),s=n;if(e(".ngl-email.ngl-mobile").is(":visible"))var a=e(".ngl-email.ngl-mobile");else a=e(".ngl-email.ngl-desktop");n.hasClass("dropdown")&&(l=n.parents(".components-base-control").attr("data-option"),i=n.dropdown("get value")),n.is(":checkbox")&&(i=n.is(":checked")?1:0);var o="action=newsletterglue_ajax_save_theme_setting&security="+newsletterglue_params.ajaxnonce+"&id="+l+"&value="+i;if("font"==l)if(i&&"0"!=i){var d=n.parents(".components-base-control").find(".ui .text").html();a.css({"font-family":d})}else a.css({"font-family":"inherit"});if("h1_align"==l||"h2_align"==l||"h3_align"==l||"h4_align"==l||"h5_align"==l||"h6_align"==l||"p_align"==l){var r=l.replace("_align","");e(".ngl-email").find(r).css({"text-align":i})}if("h1_size"==l||"h2_size"==l||"h3_size"==l||"h4_size"==l||"h5_size"==l||"h6_size"==l||"p_size"==l){r=l.replace("_size","");a.find(r).not(".ngl-mobile").css({"font-size":i+"px"})}if("mobile_h1_size"==l||"mobile_h2_size"==l||"mobile_h3_size"==l||"mobile_h4_size"==l||"mobile_h5_size"==l||"mobile_h6_size"==l||"mobile_p_size"==l){r=l.replace("_size","").replace("mobile_","");a.find(r).not(".ngl-desktop").css({"font-size":i+"px"})}if("h1_colour"==l||"h2_colour"==l||"h3_colour"==l||"h4_colour"==l||"h5_colour"==l||"h6_colour"==l||"p_colour"==l||"a_colour"==l){r=l.replace("_colour","");a.find(r).not(".wp-block-button__link").css({color:i})}if("email_bg"==l&&e(".ngl-email").css({"background-color":i}),"container_bg"==l&&(a.find(".ngl-email-container").css({"background-color":i}),e(".ngl-email-container").css({"background-color":i})),"btn_bg"==l&&a.find(".wp-block-button__link").css({"background-color":i}),"btn_colour"==l&&a.find(".wp-block-button__link").css({color:i}),"btn_border"==l&&a.find(".wp-block-button__link").css({"border-color":i}),"btn_radius"==l&&a.find(".wp-block-button__link").css({"border-radius":i+"px"}),"btn_width"==l||"mobile_btn_width"==l){var c=i+"px";0==i&&(c="auto"),a.find(".wp-block-button__link").css({"min-width":c})}"container_padding1"!=l&&"mobile_container_padding1"!=l||a.find(".ngl-email-container").css({"padding-top":i+"px","padding-bottom":i+"px"}),"container_margin"!=l&&"mobile_container_margin"!=l||a.find(".ngl-email-container").css({"margin-top":i+"px","margin-bottom":i+"px"}),"ngl_credits"==l&&(1==i?e(".ngl-email").find(".ngl-credits").removeClass("is-hidden"):e(".ngl-email").find(".ngl-credits").addClass("is-hidden")),"ngl_add_title"==l&&(1==i?e(".ngl-email").find("h1:first").removeClass("is-hidden"):e(".ngl-email").find("h1:first").addClass("is-hidden")),"ngl_add_featured"==l&&(1==i?e(".ngl-email").find(".ngl-masthead").removeClass("is-hidden"):e(".ngl-email").find(".ngl-masthead").addClass("is-hidden")),"ngl_position_featured"==l&&("above"==i?e(".ngl-email").each(function(){var n=e(this).find(".ngl-masthead-below");n.insertBefore(e(this).find("h1.ngl-primary-h")),n.removeClass("ngl-masthead-below").addClass("ngl-masthead-above")}):e(".ngl-email").each(function(){var n=e(this).find(".ngl-masthead-above");n.insertAfter(e(this).find("h1.ngl-primary-h")),n.removeClass("ngl-masthead-above").addClass("ngl-masthead-below")})),"ngl_position_logo"==l&&e(".ngl-email-logo").removeClass("ngl-logo-left ngl-logo-center ngl-logo-right ngl-logo-full").addClass("ngl-logo-"+i),console.log("save_theme"),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:o,beforeSend:function(){t.find(".ngl-process").addClass("is-hidden"),t.find(".ngl-process.is-waiting").removeClass("is-hidden"),s.attr("disabled","disabled")},success:function(e){t.find(".ngl-process").addClass("is-hidden"),t.find(".ngl-process.is-valid").removeClass("is-hidden"),s.removeAttr("disabled"),setTimeout(function(){t.find(".ngl-process").addClass("is-hidden")},1500)}})}function l(){e(".ngl-color-field").each(function(){var n=e(this);n.spectrum({type:"color",showPalette:!1,showInput:!0,showButtons:!1,showAlpha:!1,allowEmpty:!0,clickoutFiresChange:!0,move:function(l){if(l)var i=l.toHexString();else i="";var s=n.parents(".ngl-theme-color").find("input.ngl-theme-input").attr("data-option");t(e("input[data-option="+s+"]")),e(".ngl-customize-preview").length&&(e(".ngl-customize-preview").find("blockquote").css({"border-color":i}),e(".ngl-customize-preview").find("p a").css({color:i}),e(".ngl-customize-preview").find("p.ngl-customize-button a").css({"background-color":i}))}})})}e(document).on("click",".ngl-theme-upload-button a, .ngl-image-trigger",function(t){var l,i,s;return t.preventDefault(),l=e(this).parents(".ngl-theme-upload"),s=l.attr("data-id"),i&&i.open(),(i=wp.media({title:newsletterglue_params.select_image,multiple:!1,library:{type:"image"}})).on("close",function(){var t=i.state().get("selection"),l=new Array,a=0;t.each(function(e){l[a]=e.id,a++});var o=l.join(",");e("input#"+s+"_id").val(o),n(s,o)}),i.on("open",function(){var n=i.state().get("selection");e("input#"+s+"_id").val().split(",").forEach(function(e){if(e){var t=wp.media.attachment(e);t.fetch(),n.add(t?[t]:[])}})}),i.open(),!1}),e(document).on("click",".ngl-image-remove",function(t){t.preventDefault();var l=e(this).parents(".ngl-theme-upload").attr("data-id");return n(l,0),"newsletterglue_logo"==l&&e(".ngl-email-logo").addClass("is-hidden"),!1}),e(document).on("ngl-theme-options",function(){e("#ngl_credits").is(":checked")?e(".ngl-email").find(".ngl-credits").removeClass("is-hidden"):e(".ngl-email").find(".ngl-credits").addClass("is-hidden"),e("#ngl_add_featured").is(":checked")?e(".ngl-email").find(".ngl-masthead").removeClass("is-hidden"):e(".ngl-email").find(".ngl-masthead").addClass("is-hidden")}).trigger("ngl-theme-options"),e(document).on("keyup",'.ngl-theme-px input[type="number"]',function(){var n=parseInt(e(this).val()),t=parseInt(e(this).attr("min")),l=parseInt(e(this).attr("max"));n<t&&e(this).val(t),n>l&&e(this).val(l)}),e(document).on("change",".ngl-theme-input",function(){t(e(this))}),e(document).on("click",".ngl-email a",function(e){return e.preventDefault(),!1}),l(),e(document).on("click",".ngl-theme-more",function(n){n.preventDefault(),e(this).hide(),e(".ngl-theme-hidden").show()}),e(document).on("click",".ngl-theme-less",function(n){n.preventDefault(),e(".ngl-theme-more").show(),e(".ngl-theme-hidden").hide()}),e(document).on("click",".ngl-theme-reset-link",function(){event.preventDefault();var n=e(this).parents(".ngl-theme-reset");return n.find(".ngl-theme-reset-confirm").hasClass("is-hidden")?n.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").removeClass("is-hidden"):n.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),!1}),e(document).on("click",".ngl-theme-reset-back",function(n){return n.preventDefault(),e(this).parents(".ngl-theme-reset").find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),!1}),e(document).on("click",".ngl-theme-reset-do",function(n){n.preventDefault();var t=e(this).parents(".ngl-theme-reset"),i="action=newsletterglue_ajax_reset_theme&security="+newsletterglue_params.ajaxnonce,s=!1;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:i,beforeSend:function(){e(".ngl-theme").addClass("ngl-load"),t.find(".ngl-process").addClass("is-hidden"),t.find(".ngl-process.is-waiting").removeClass("is-hidden"),t.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),e(".ngl-theme").hasClass("ngl-mobile")&&(s=!0)},success:function(n){e(".ngl-theme").replaceWith(n),e(".ngl-theme").find(".ui.dropdown, .ui.dropdown").dropdown(),e(".ngl-theme").find(".ngl-theme-reset .ngl-process").addClass("is-hidden"),e(".ngl-theme").find(".ngl-theme-reset .ngl-process.is-valid").removeClass("is-hidden"),s?(e(".ngl-theme").addClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").hide()):(e(".ngl-theme").removeClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").show()),l(),setTimeout(function(){e(".ngl-theme").find(".ngl-process").addClass("is-hidden")},1500)}}),!1}),e(document).on("click",".ngl-theme-toggle span.ngl-mobile",function(){e(".ngl-theme-toggle").find("span.ngl-bulb").css({left:"80px"}).html(e(this).html()),e(".ngl-theme").addClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").hide()}),e(document).on("click",".ngl-theme-toggle span.ngl-desktop",function(){e(".ngl-theme-toggle").find("span.ngl-bulb").css({left:"0"}).html(e(this).html()),e(".ngl-theme").removeClass("ngl-mobile"),e(".ngl-theme .ngl-desktop").show()}),e(document).find("#ngl_add_title").length&&(e(document).find("#ngl_add_title").is(":checked")||(e(document).find("#ngl_link_title").prop("disabled",!0),e(document).find("#ngl_link_title").parents(".components-base-control__field").addClass("disabled"))),e(document).on("change","#ngl_add_title",function(){e(this).is(":checked")?(e(document).find("#ngl_link_title").prop("disabled",!1),e(document).find("#ngl_link_title").parents(".components-base-control__field").removeClass("disabled")):(e(document).find("#ngl_link_title").prop("disabled",!0),e(document).find("#ngl_link_title").parents(".components-base-control__field").addClass("disabled"))})}(jQuery);